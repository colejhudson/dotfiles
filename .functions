#!/usr/bin/env fish

function update-gf -a MESSAGE
  set URL https://whatthefuckisyourboyfrienddoing.now.sh/
  curl --request POST --data $MESSAGE $URL
end

function gcc-run -a program
  set file (mktemp)
  gcc $program -o $file
  and eval $file
  rm $file
end

function datascience_notebook
  set DOCKER_PORT 8080
  set DOCKER_ID (docker run -d -p $DOCKER_PORT:8888 -e JUPYTER_ENABLE_LAB=yes -w $PWD -v $PWD:$PWD jupyter/datascience-notebook jupyter-lab $argv)
  set DOCKER_PATH (docker logs $DOCKER_ID 2>&1 | grep "http" | head -n 1 | cut -d ')' -f 2 | cut -d '/' -f 2)

  echo "http://127.0.0.1:$DOCKER_PORT/$DOCKER_PATH"

  open "http://127.0.0.1:$DOCKER_PORT/$DOCKER_PATH"
end

function docker-most-recently-started
  docker ps | awk '{ print $1 }' | head -n 2 | tail -n 1
end

function docker-stop-most-recent
  docker stop (docker-most-recently-started)
end
